{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import process from\"node:process\";import mediaHealthModule from\"../../lib/media/health\";import prismaModule from\"../../lib/prisma\";const{getMediaHealth}=mediaHealthModule;const{prisma}=prismaModule;const assertNumber=__name((value,label)=>{if(typeof value!==\"number\"||Number.isNaN(value)){throw new Error(`${label} must be a number`)}},\"assertNumber\");const run=__name(async()=>{const health=await getMediaHealth();assertNumber(health.queue.waiting,\"queue.waiting\");assertNumber(health.database.readyVideos,\"database.readyVideos\");if(!Array.isArray(health.recentFailures)){throw new Error(\"recentFailures must be an array\")}console.log(\"media.health OK\",JSON.stringify(health.queue))},\"run\");run().catch(error=>{console.error(\"media.health FAILED\",error);process.exitCode=1}).finally(async()=>{await prisma.$disconnect()});\n","warnings":[],"map":{"version":3,"mappings":"kHAAA,OAAO,YAAa,eAEpB,OAAO,sBAAuB,yBAC9B,OAAO,iBAAkB,mBAGzB,KAAM,CAAE,cAAe,EAAI,kBAE3B,KAAM,CAAE,MAAO,EAAI,aAEnB,MAAM,aAAe,QAAC,MAAgB,QAAkB,CACtD,GAAI,OAAO,QAAU,UAAY,OAAO,MAAM,KAAK,EAAG,CACpD,MAAM,IAAI,MAAM,GAAG,KAAK,mBAAmB,CAC7C,CACF,EAJqB,gBAMrB,MAAM,IAAM,gBAAY,CACtB,MAAM,OAAS,MAAM,eAAe,EACpC,aAAa,OAAO,MAAM,QAAS,eAAe,EAClD,aAAa,OAAO,SAAS,YAAa,sBAAsB,EAChE,GAAI,CAAC,MAAM,QAAQ,OAAO,cAAc,EAAG,CACzC,MAAM,IAAI,MAAM,iCAAiC,CACnD,CACA,QAAQ,IAAI,kBAAmB,KAAK,UAAU,OAAO,KAAK,CAAC,CAC7D,EARY,OAUZ,IAAI,EACD,MAAO,OAAU,CAChB,QAAQ,MAAM,sBAAuB,KAAK,EAC1C,QAAQ,SAAW,CACrB,CAAC,EACA,QAAQ,SAAY,CACnB,MAAM,OAAO,YAAY,CAC3B,CAAC","names":[],"ignoreList":[],"sources":["/Users/arminiranpour/Desktop/Project/CNaghsh-next/apps/web/scripts/media/health-check.mts"],"sourcesContent":[null]}}