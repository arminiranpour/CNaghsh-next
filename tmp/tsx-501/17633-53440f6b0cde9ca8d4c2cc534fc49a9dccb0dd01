{"code":"__filename=\"/Users/arminiranpour/Desktop/Project/CNaghsh-next/apps/web/lib/env.ts\";(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var env_exports={};__export(env_exports,{assertEnvReady:()=>assertEnvReady,env:()=>env,isDev:()=>isDev,isProd:()=>isProd});module.exports=__toCommonJS(env_exports);var import_zod=require(\"zod\");const envSchema=import_zod.z.object({DATABASE_URL:import_zod.z.string({required_error:\"DATABASE_URL is required\"}).trim().min(1,\"DATABASE_URL is required\"),PUBLIC_BASE_URL:import_zod.z.string({required_error:\"PUBLIC_BASE_URL is required\"}).trim().min(1,\"PUBLIC_BASE_URL is required\").refine(value=>!value.endsWith(\"/\"),{message:\"PUBLIC_BASE_URL must not end with a trailing slash\"}).superRefine((value,ctx)=>{let parsed2;try{parsed2=new URL(value)}catch(error){ctx.addIssue({code:import_zod.z.ZodIssueCode.custom,message:\"PUBLIC_BASE_URL must be a valid absolute URL\"});return}if(!parsed2.protocol||parsed2.protocol===\"\"){ctx.addIssue({code:import_zod.z.ZodIssueCode.custom,message:\"PUBLIC_BASE_URL must include a protocol\"})}}),WEBHOOK_SHARED_SECRET:import_zod.z.string().trim().min(1,\"WEBHOOK_SHARED_SECRET cannot be empty\").optional().transform(value=>value&&value.length>0?value:void 0),NODE_ENV:import_zod.z.enum([\"development\",\"test\",\"production\"]).default(\"development\")}).superRefine((data,ctx)=>{let base=null;try{base=new URL(data.PUBLIC_BASE_URL)}catch(error){}if(!base){return}const hostname=base.hostname.toLowerCase();const isLocalHostname=hostname===\"localhost\"||hostname===\"127.0.0.1\"||hostname===\"0.0.0.0\"||hostname===\"::1\"||hostname.endsWith(\".local\");if(data.NODE_ENV===\"production\"&&base.protocol!==\"https:\"&&!isLocalHostname){ctx.addIssue({code:import_zod.z.ZodIssueCode.custom,path:[\"PUBLIC_BASE_URL\"],message:\"PUBLIC_BASE_URL must use https in production\"})}});const fallbackBaseUrl=process.env.PUBLIC_BASE_URL??process.env.NEXT_PUBLIC_BASE_URL??process.env.NEXT_PUBLIC_APP_URL??(process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:void 0);const rawEnv={DATABASE_URL:process.env.DATABASE_URL,PUBLIC_BASE_URL:fallbackBaseUrl,WEBHOOK_SHARED_SECRET:process.env.WEBHOOK_SHARED_SECRET,NODE_ENV:process.env.NODE_ENV??void 0};const parsed=envSchema.safeParse(rawEnv);let state;if(parsed.success){state={ok:true,data:parsed.data}}else{const formatted=parsed.error.issues.map(issue=>{const path=issue.path.join(\".\");return path?`${path}: ${issue.message}`:issue.message}).join(\"\\n\");state={ok:false,error:new Error(`Invalid environment variables:\n${formatted}`)}}const assertEnvReady=__name(()=>{if(!state.ok){throw state.error}},\"assertEnvReady\");assertEnvReady();if(!state.ok){throw state.error}const env=state.data;const baseUrl=new URL(env.PUBLIC_BASE_URL);if(env.NODE_ENV===\"development\"&&baseUrl.protocol!==\"https:\"){console.warn(`[env] PUBLIC_BASE_URL is using \"${baseUrl.protocol}\". HTTPS is required in production.`)}const isProd=env.NODE_ENV===\"production\";const isDev=env.NODE_ENV===\"development\";0&&(module.exports={assertEnvReady,env,isDev,isProd});\n})()\n","warnings":[],"map":{"version":3,"mappings":";mvBAAA,mLAAkB,eAIlB,MAAM,UAAY,aACf,OAAO,CACN,aAAc,aACX,OAAO,CAAE,eAAgB,0BAA2B,CAAC,EACrD,KAAK,EACL,IAAI,EAAG,0BAA0B,EACpC,gBAAiB,aACd,OAAO,CAAE,eAAgB,6BAA8B,CAAC,EACxD,KAAK,EACL,IAAI,EAAG,6BAA6B,EACpC,OAAQ,OAAU,CAAC,MAAM,SAAS,GAAG,EAAG,CACvC,QAAS,oDACX,CAAC,EACA,YAAY,CAAC,MAAO,MAAQ,CAC3B,IAAIA,QACJ,GAAI,CACFA,QAAS,IAAI,IAAI,KAAK,CACxB,OAAS,MAAO,CACd,IAAI,SAAS,CACX,KAAM,aAAE,aAAa,OACrB,QAAS,8CACX,CAAC,EACD,MACF,CAEA,GAAI,CAACA,QAAO,UAAYA,QAAO,WAAa,GAAI,CAC9C,IAAI,SAAS,CACX,KAAM,aAAE,aAAa,OACrB,QAAS,yCACX,CAAC,CACH,CACF,CAAC,EACH,sBAAuB,aACpB,OAAO,EACP,KAAK,EACL,IAAI,EAAG,uCAAuC,EAC9C,SAAS,EACT,UAAW,OAAW,OAAS,MAAM,OAAS,EAAI,MAAQ,MAAU,EACvE,SAAU,aACP,KAAK,CAAC,cAAe,OAAQ,YAAY,CAAC,EAC1C,QAAQ,aAAa,CAC1B,CAAC,EACA,YAAY,CAAC,KAAM,MAAQ,CAC1B,IAAI,KAAmB,KACvB,GAAI,CACF,KAAO,IAAI,IAAI,KAAK,eAAe,CACrC,OAAS,MAAO,CAEhB,CAEA,GAAI,CAAC,KAAM,CACT,MACF,CAEA,MAAM,SAAW,KAAK,SAAS,YAAY,EAC3C,MAAM,gBACJ,WAAa,aACb,WAAa,aACb,WAAa,WACb,WAAa,OACb,SAAS,SAAS,QAAQ,EAE5B,GACE,KAAK,WAAa,cAClB,KAAK,WAAa,UAClB,CAAC,gBACD,CACA,IAAI,SAAS,CACX,KAAM,aAAE,aAAa,OACrB,KAAM,CAAC,iBAAiB,EACxB,QAAS,8CACX,CAAC,CACH,CACF,CAAC,EAQH,MAAM,gBACJ,QAAQ,IAAI,iBACZ,QAAQ,IAAI,sBACZ,QAAQ,IAAI,sBACX,QAAQ,IAAI,WACT,WAAW,QAAQ,IAAI,UAAU,GACjC,QAEN,MAAM,OAAS,CACb,aAAc,QAAQ,IAAI,aAC1B,gBAAiB,gBACjB,sBAAuB,QAAQ,IAAI,sBACnC,SAAW,QAAQ,IAAI,UAAoC,MAC7D,EAEA,MAAM,OAAS,UAAU,UAAU,MAAM,EAEzC,IAAI,MACJ,GAAI,OAAO,QAAS,CAClB,MAAQ,CAAE,GAAI,KAAM,KAAM,OAAO,IAAK,CACxC,KAAO,CACL,MAAM,UAAY,OAAO,MAAM,OAC5B,IAAK,OAAU,CACd,MAAM,KAAO,MAAM,KAAK,KAAK,GAAG,EAChC,OAAO,KAAO,GAAG,IAAI,KAAK,MAAM,OAAO,GAAK,MAAM,OACpD,CAAC,EACA,KAAK,IAAI,EAEZ,MAAQ,CACN,GAAI,MACJ,MAAO,IAAI,MAAM;AAAA,EAAmC,SAAS,EAAE,CACjE,CACF,CAEO,MAAM,eAAiB,WAAY,CACxC,GAAI,CAAC,MAAM,GAAI,CACb,MAAM,MAAM,KACd,CACF,EAJ8B,kBAM9B,eAAe,EAEf,GAAI,CAAC,MAAM,GAAI,CACb,MAAM,MAAM,KACd,CAEO,MAAM,IAAM,MAAM,KAEzB,MAAM,QAAU,IAAI,IAAI,IAAI,eAAe,EAE3C,GAAI,IAAI,WAAa,eAAiB,QAAQ,WAAa,SAAU,CACnE,QAAQ,KACN,mCAAmC,QAAQ,QAAQ,qCACrD,CACF,CAEO,MAAM,OAAS,IAAI,WAAa,aAChC,MAAM,MAAQ,IAAI,WAAa","names":["parsed"],"ignoreList":[],"sources":["/Users/arminiranpour/Desktop/Project/CNaghsh-next/apps/web/lib/env.ts"],"sourcesContent":[null]}}