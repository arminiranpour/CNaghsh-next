# اسکریپت QA — داشبورد صورتحساب کاربر

## پیش‌نیاز
- حساب کاربری با دسترسی به داشبورد.
- وجود حداقل یک اشتراک فعال و یک فاکتور نمونه برای کاربر تست.
- دسترسی به محیطی که قابلیت پرداخت شبیه‌سازی شده فعال است.

## مراحل تست

1. **ورود و مشاهده سربرگ**
   - وارد حساب کاربری شوید و به مسیر `/dashboard/billing` بروید.
   - تایید کنید که نام پلن، وضعیت (`فعال` یا سایر حالت‌ها)، تاریخ شروع و پایان به‌صورت تاریخ جلالی نمایش داده می‌شود.
   - اگر اشتراک فعال باشد، نشان وضعیت در نوار بالای داشبورد با متن «اشتراک فعال تا …» باید دیده شود.

2. **اعلان لغو در پایان دوره**
   - روی دکمه «لغو اشتراک در پایان دوره» کلیک کنید.
   - در دیالوگ تایید، پیام فارسی و دکمه تایید را بررسی کنید.
   - پس از تایید، بنر اطلاع‌رسانی و غیرفعال شدن مجدد دکمه را کنترل کنید.
   - با دکمه «لغو درخواست لغو» بنر را حذف کرده و وضعیت را بررسی کنید.

3. **تمدید فوری**
   - دکمه «تمدید اشتراک اکنون» را بزنید و تایید کنید که پیام «در حال انتقال» نمایش داده می‌شود.
   - هدایت به صفحه `/checkout/<id>` و سپس آدرس درگاه شبیه‌سازی شده باید انجام شود.
   - پس از بازگشت، مطمئن شوید تاریخ پایان اشتراک به‌روزرسانی می‌شود (در صورت شبیه‌سازی پرداخت موفق).

4. **دسترسی انتشار پروفایل**
   - در کارت دسترسی بررسی کنید که وضعیت فعال/غیرفعال با بنر سبز یا خاکستری هماهنگ است.
   - تاریخ انقضا باید با تاریخ پایان اشتراک یکسان باشد.
   - در صورت انقضا، پیام راهنمای تمدید نمایش داده شود.

5. **تاریخچه پرداخت‌ها و فاکتورها**
   - بین تب‌های «پرداخت‌ها» و «فاکتورها» جابه‌جا شوید و مطمئن شوید جدول با داده‌های واقعی پر می‌شود.
   - فیلتر تاریخ را برای یک بازه خاص اعمال کنید و بررسی کنید که نتایج محدود می‌شوند.
   - فیلتر وضعیت را برای حالت‌های مختلف آزمایش کنید (مثلاً `ناموفق` برای پرداخت).
   - دکمه «حذف فیلترها» باید ورودی‌ها را به حالت اولیه برگرداند.
   - دکمه «دریافت PDF» در صورت نبود آدرس باید غیرفعال باشد و پیام راهنما نشان دهد.

6. **اعلان‌های وضعیت**
   - تاریخ پایان اشتراک را به کمتر از سه روز تنظیم کنید و بررسی کنید که کارت یادآور تمدید نمایش داده می‌شود.
   - یک پرداخت ناموفق اخیر ایجاد کنید و اطمینان حاصل کنید بنر خطا با دکمه «تلاش دوباره پرداخت» ظاهر می‌شود.

7. **حالت بدون اشتراک**
   - کاربری بدون اشتراک بسازید و مشاهده کنید کارت راهنمای خرید اشتراک نمایش داده می‌شود.
   - تاریخچه باید پیام «تراکنشی یافت نشد» یا «فاکتوری یافت نشد» را نشان دهد.

8. **محلی‌سازی و راست‌به‌چپ**
   - تمام متن‌ها را بررسی کنید که به فارسی و چینش RTL هستند.
   - فرمت تاریخ جلالی و واحد پول (ریال) را تایید کنید.
   - با صفحه‌کلید (Tab/Shift+Tab) دیالوگ لغو را پیمایش کنید و دسترسی‌پذیری دکمه‌ها را بسنجید.

## معیارهای قبولی
- تمام پیام‌ها و وضعیت‌ها به‌صورت محلی‌سازی شده نمایش داده شوند.
- اقدامات تکراری (دابل کلیک) خطا یا حالت ناسازگار ایجاد نکند.
- بنر «وضعیت شما به‌روزرسانی شد» پس از تغییرات سرور قابل مشاهده باشد (Toast پس از موفقیت اکشن‌ها).
